<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0" />
	<title>TTangÂ·blog</title>


	<style type="text/css">

		body {
			margin: 0;
			padding: 0;
		}

		.flex-layout {
		    display: -webkit-flex;
		    display: flex;
		    justify-content: flex-start;
		}
		.row {
		    -webkit-flex-direction: row;
		    flex-direction: row;
		}

		.column {
		    -webkit-flex-direction: column;
		    flex-direction: column;
		}

		ul {
			/*border-right: solid 1px black;*/
			/*overflow: hidden;*/
			margin-top: 0;
			margin-bottom: 0;
		}

		#blogTitle li {

			border-bottom: solid 1px black;
			padding: 15px 10px 15px 0px;
			transition: all 0.5s linear;
		}
		#blogTitle li:hover {
			cursor:pointer;
			background: grey;
		}

		#blogTitle{
			/*float: left;*/
			/*background: gray;*/
			z-index: 100;
			height: 100%;
			position: fixed;
			/*position: fixed;*/
			overflow-y: scroll;
			width: 300px;
			/*display: block;*/
			left: 0px;
			top: 0px;
			/*margin: 20px 0px;*/
			transition: all 0.5s linear;
			transition-delay: 0.2s;
		}

		#blogContent{
			
			/*position: absolute;*/
			/*top: 0;*/

			/*right: 0;*/
			padding-left: 50px;
			height: 300px;
			margin-left: 350px;
			/*width: auto;*/
			background: red;
			transition: all 0.5s linear;
			transition-delay: 0.2s;
			
		}

		@media screen and (max-width: 600px){

			#blogTitle{
				left: -350px;
				position: absolute;
				/*display: none;*/
			}

			#blogContent{
				padding-left: 0px;
				margin-left: 0px;
				/*display:none;*/
			}
		}

	</style>

</head>
<body class="" >
	<!-- <div > -->
	
	<!-- </div> -->

	<!--  -->
	<div id="blogContent">
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>
		<p>blogConten</p>

	</div>

	<!-- <div id="blogTitle"> -->
		<ul id="blogTitle">
			
		</ul>
	<!-- </div> -->

	

	<script type="text/javascript">

		(function () {
			function makeRequest(url, callback) {
				url = url
				method = "GET"
				body = ""
				var bodyStr = ""
				if (window.XMLHttpRequest) { // Mozilla, Safari, ...
					httpRequest = new XMLHttpRequest();
				} else if (window.ActiveXObject) { // IE
					try {
						httpRequest = new ActiveXObject("Msxml2.XMLHTTP");
					} catch (e) {
						try {
							httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
						} catch (e) {
						}
					}
				}
				if (!httpRequest) {
					alert('Giving up :( Cannot create an XMLHTTP instance');
					return false;
				}
				httpRequest.onreadystatechange = function () {
					if (httpRequest.readyState === 4) {
						
						if (httpRequest.status === 200) {
							callback(httpRequest.responseText)
						} else {
							alert('There was a problem with the request.');
						}
					}
				}
				
				httpRequest.open(method, url);
				httpRequest.setRequestHeader('Content-Type', 'application/json');
				httpRequest.send(bodyStr);
			}
			window.makeRequest = makeRequest
		})()
	</script>

	<script type="text/javascript">

		function requestTitle () {
			var liCell = '<li id={{id}} onclick="requestBlog(this, event)" >{{title}}</li>'
			makeRequest("/blogs", function blogs (data) {
				data = JSON.parse(data);
				var str = "";

				for (var i = 0; i < data.length; i++) {
					var item = data[i];
					var cell = liCell;

					cell = cell.replace("{{id}}", item.id)
								.replace("{{title}}", item.title)
					str += cell;
				};

				blogTitle.innerHTML = str
			})
		}

		function requestBlog (elem, event) {
			var id = elem.getAttribute("id");
			makeRequest("/blog/"+id, function blog (data) {
				console.log(data)	
			})
		}

	</script>

	<script type="text/javascript">
		window.onload = function () {
			requestTitle()
		}
	</script>
</body>
</html>